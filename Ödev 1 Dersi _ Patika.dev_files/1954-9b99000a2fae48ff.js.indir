"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1954],{11856:function(e,n,t){var o=t(97458);t(52983);var r=t(46078),s=t(92349),i=t(54387),u=t(92025),l=t(22404);n.Z=e=>{let{children:n,isStyled:t}=e;return(0,o.jsx)(l.m.span,{...t&&{sx:{"& *":{wordBreak:"break-all"},"& h1,h2,h3,h4,h5,h6":{fontSize:"xl",fontWeight:500,mb:2},"& p":{mb:4},"& ul":{pl:8,mb:4},"& a":{color:"primary.color"}}},children:(0,o.jsx)(r.D,{remarkPlugins:[i.Z],components:{code(e){var n;let{node:t,inline:r,className:i,...c}=e,a=/language-(\w+)/.exec(i||""),d=null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.meta;return(0,o.jsx)(l.m.span,{sx:{"& *":{fontSize:{base:"8",sm:"10",md:"sm",lg:"md"}}},children:(0,o.jsx)(s.Z,{style:u.vk,language:(null==a?void 0:a[1])||"",showLineNumbers:!0,wrapLines:!!d,useInlineStyles:!0,...c})})}},children:n})})}},39959:function(e,n){let t=Object.freeze({IDLE:"IDLE",STARTED:"STARTED",PASSED:"PASSED",FAILED:"FAILED",ERROR:"ERROR"});n.Z=t},91954:function(e,n,t){t.d(n,{ED:function(){return components_CourseCompletionComponentHandler},G6:function(){return components_CourseCompletionError},Vs:function(){return components_CourseCompletionHeader},rX:function(){return components_CourseCompletionIntro},zn:function(){return components_CourseCompletionQuestion},Fr:function(){return components_CourseCompletionResult},T3:function(){return components_UncheckableRadioButton}});var o=t(97458),r=t(39959),s=t(27479),i=t(52983),components_CourseCompletionComponentHandler=e=>{let{handleStartTest:n}=e,{quizStatus:{questions:t=[],currentQuestion:u,status:l}}=(0,i.useContext)(s.p);switch(l){case r.Z.IDLE:return(0,o.jsx)(components_CourseCompletionIntro,{handleStartTest:n});case r.Z.STARTED:return(0,o.jsx)(components_CourseCompletionQuestion,{question:null==t?void 0:t[u]},null==t?void 0:t[u].questionId);case r.Z.FAILED:case r.Z.PASSED:return(0,o.jsx)(components_CourseCompletionResult,{});default:return(0,o.jsx)(components_CourseCompletionError,{handleStartTest:n})}},u=t(23537),l=t(30984),c=t(51979),a=t(42185),d=t(28207),m=t(6677),p=t(47822),x=t(43775),components_CourseCompletionError=e=>{let{handleStartTest:n}=e,{data:t}=(0,x.useSession)(),{quizStatus:{isLoading:r}}=(0,i.useContext)(s.p),{t:h}=(0,m.$G)("course-completion"),{isOpen:C,onClose:f,onOpen:g}=(0,u.q)();return(0,o.jsxs)(l.k,{mt:5,gap:5,direction:"column",children:[(0,o.jsxs)(c.b,{status:"error",children:[(0,o.jsx)(a.z,{}),h("error.description")]}),(0,o.jsx)(d.z,{onClick:n,alignSelf:"center",isLoading:r,children:h("error.button")}),!t&&(0,o.jsx)(p.Z,{isOpen:C,onClose:f,onOpen:g})]})},h=t(66807),C=t(72751),f=t(64435),g=t(32432),components_CourseCompletionProgress=e=>{let{totalQuestionCount:n=0,currentQuestionCount:t=0}=e,{t:r}=(0,m.$G)("course-completion");return(0,o.jsxs)(l.k,{flexGrow:"1",align:"center",gap:2,children:[(0,o.jsxs)(C.x,{fontSize:"sm",color:"primary.color",fontWeight:"medium",children:[r("header.progressPrefix")," ",t,"/",n]}),(0,o.jsx)(f.xu,{flex:"1",children:(0,o.jsx)(g.G,{value:t/n*100,progressProps:{variant:"secondary",minH:0,h:2}})})]})},components_CourseCompletionHeader=()=>{let{quizStatus:{status:e,totalQuestions:n,currentQuestion:t}}=(0,i.useContext)(s.p),{t:u}=(0,m.$G)("course-completion");return(0,o.jsxs)(l.k,{justifyContent:"space-between",align:{base:"flex-start",md:"center"},direction:{base:"column",md:"row"},children:[(0,o.jsx)(h.X,{size:{base:"sm",md:"md"},fontWeight:"bold",flex:"5",children:u("header.title")}),e===r.Z.STARTED&&(0,o.jsx)(components_CourseCompletionProgress,{totalQuestionCount:n,currentQuestionCount:t+1})]})},j=t(31332),components_CourseCompletionIntro=e=>{let{handleStartTest:n}=e,{quizStatus:{isLoading:t}}=(0,i.useContext)(s.p),{t:r}=(0,m.$G)("course-completion"),{isOpen:c,onClose:a,onOpen:p}=(0,u.q)();return(0,o.jsxs)(j.g,{children:[(0,o.jsxs)(l.k,{fontSize:"md",fontWeight:"medium",gap:5,direction:"column",mt:5,children:[(0,o.jsx)(C.x,{children:r("intro.description.text1")}),(0,o.jsx)(C.x,{children:r("intro.description.text2")}),(0,o.jsx)(C.x,{children:r("intro.description.text3")}),(0,o.jsx)(C.x,{children:r("intro.description.text4")})]}),(0,o.jsx)(d.z,{onClick:n,alignSelf:"center",isLoading:t,px:10,isOpen:c,onClose:a,onOpen:p,children:(0,o.jsx)(C.x,{children:r("intro.button")})})]})},b=t(22404),S=t(38645),z=t(32074),v=t(1303),_=t(31618);let quizCompletionDataGenerator=(e,n)=>{let t=Object.entries(e).map(e=>{let[t,o]=e,r=n.find(e=>e.questionId===t);return{questionId:t,answerIndex:o,extraContentId:null==r?void 0:r.extraContentId}});return t};var y=t(59554),E=t(97877),I=t(96340),w=t(11856);let{chakra:k,Flex:Q,Box:A,useCheckbox:T}=t(70341);var components_UncheckableRadioButton=e=>{let{radioColor:n="uncheckable.radio.selected.bg",dotColor:t="uncheckable.radio.selected.dot.bg",...r}=e,{state:s,getCheckboxProps:i,getInputProps:u,getLabelProps:l,htmlProps:c,getRootProps:a}=T(r),{testKey:d,...m}=c;return(0,o.jsxs)(k.label,{w:"full",display:"flex",flexDirection:"row",alignItems:"center",gap:2,cursor:a().disabled?"no-drop":"pointer",...m,children:[(0,o.jsx)(k.input,{...u(),"data-testid":r.testKey}),(0,o.jsx)(Q,{alignItems:"center",justifyContent:"center",border:s.isChecked?"0":"2px solid",borderColor:"gray.200",bg:"uncheckable.radio.bg",rounded:"full",w:4,minW:4,minH:4,h:4,...i(),children:s.isChecked&&(0,o.jsx)(A,{w:"full",h:"full",rounded:"full",bg:n,position:"relative",border:"0",display:"flex",alignItems:"center",justifyContent:"center",children:(0,o.jsx)(A,{w:"35%",h:"35%",bgColor:t,rounded:"full",border:"0"})})}),(0,o.jsx)(A,{...l(),maxW:{base:"320",md:"unset"},children:r.children})]})},D=t(11644),R=t(33975);let q=(0,b.m)(E.E.div,{shouldForwardProp:e=>(0,I.Z)(e)||(0,S.x)(e)});var components_CourseCompletionQuestion=e=>{let{question:{options:n,title:t}}=e,{quizStatus:{currentQuestion:r,questions:u,answers:l,isLoading:c,slug:a},dispatch:p}=(0,i.useContext)(s.p),[x]=(0,D.D)(R._,{refetchQueries:["userPoints"]}),{t:C}=(0,m.$G)("course-completion"),{getCheckboxProps:f}=(0,z.u)({}),[g,b]=(0,i.useState)(()=>{var e,n;return null!==(n=null==l?void 0:l[null===(e=u[r])||void 0===e?void 0:e.questionId])&&void 0!==n?n:-1}),handleChange=(e,n)=>{n===g&&(b(-1),p((0,_.u$)(void 0))),e&&n!==g&&(b(n),p((0,_.u$)(n)))},S=r===(null==u?void 0:u.length)-1,handleCompleteQuiz=async()=>{p((0,_.K4)(!0));let e=quizCompletionDataGenerator(l,u);x({variables:{courseQuizAnswer:e,courseSlug:a},onCompleted:e=>{let{endCourseQuiz:n}=e;p((0,_.K4)(!1)),p((0,_.Ho)(n))},onError:()=>{}})};return(0,o.jsxs)(j.g,{gap:5,align:"start",children:[(0,o.jsxs)(q,{initial:{x:150,opacity:0},animate:{x:0,opacity:1},exit:{x:-150,opacity:0},transition:{duration:.3},w:"full",children:[(0,o.jsx)(h.X,{fontSize:{base:"xs",sm:"sm",md:"md"},fontWeight:"bold",lineHeight:"tall",my:5,children:(0,o.jsx)(w.Z,{children:t})}),(0,o.jsx)(j.g,{direction:"row",align:"start",gap:5,overflow:"hidden",fontSize:{base:"xs",sm:"sm",md:"md"},children:n.map((e,n)=>(0,o.jsx)(components_UncheckableRadioButton,{testKey:"quiz-option-".concat(n),...f({value:g}),onChange:e=>handleChange(e.target.value,n),isChecked:n===g,children:(0,o.jsx)(w.Z,{children:e})},(0,y.x0)()))})]}),(0,o.jsxs)(v.U,{w:"full",justifyContent:"flex-end",gap:2,children:[0!==r&&(0,o.jsx)(d.z,{onClick:()=>{p((0,_.VM)())},variant:"ghost",fontSize:{base:"xs",sm:"sm",md:"md"},children:C("question.previousButton")}),(0,o.jsx)(d.z,{onClick:S?handleCompleteQuiz:()=>{p((0,_.Z$)())},isLoading:c,fontSize:{base:"xs",sm:"sm",md:"md"},children:C(S?"question.completeTest":"question.nextButton")})]})]})},Z=t(80430),O=t(83658),components_CourseCompletionResult=()=>{let{quizStatus:{status:e,results:n,slug:t}}=(0,i.useContext)(s.p),{push:u}=(0,O.useRouter)(),{t:c}=(0,m.$G)("course-completion"),{correctCount:a,emptyCount:p,score:x,wrongCount:h}=n;return(0,o.jsxs)(j.g,{alignItems:"flex-start",gap:5,children:[(0,o.jsxs)(Z.K,{alignItems:"stretch",mt:5,direction:{base:"column",md:"row"},children:[(0,o.jsx)(l.k,{bg:"transparent",border:"1px solid",borderColor:"orange.300",px:4,py:2,alignItems:"center",justifyContent:"center",borderRadius:"md",children:(0,o.jsx)(C.x,{fontSize:"md",fontWeight:"bold",children:"".concat(a," ").concat(c("result.correct")," ").concat(h," ").concat(c("result.wrong")," - ").concat(p," ").concat(c("result.empty"))})}),(0,o.jsx)(l.k,{bg:"orange.300",justifyContent:"center",alignItems:"center",px:4,py:2,borderRadius:"md",children:(0,o.jsx)(C.x,{fontSize:"md",fontWeight:"bold",children:"".concat(c("result.score"),": %").concat(x)})})]}),(0,o.jsx)(j.g,{children:e===r.Z.FAILED?(0,o.jsxs)(f.xu,{fontSize:"md",fontWeight:"medium",lineHeight:"tall",children:[(0,o.jsx)(C.x,{children:c("result.description.failed.text1")}),(0,o.jsx)(C.x,{children:c("result.description.failed.text2")})]}):(0,o.jsxs)(f.xu,{fontSize:"md",fontWeight:"medium",lineHeight:"tall",children:[(0,o.jsx)(C.x,{children:c("result.description.passed.text1")}),(0,o.jsx)(C.x,{children:c("result.description.passed.text2")})]})}),(0,o.jsx)(l.k,{alignItems:"center",justifyContent:"center",w:"full",children:(0,o.jsx)(d.z,{onClick:()=>{e===r.Z.PASSED?u("/paths"):u("/courses/".concat(t))},children:c(e===r.Z.FAILED?"result.startCourse":"result.continue")})})]})}},31618:function(e,n,t){t.d(n,{Ho:function(){return completeQuiz},K4:function(){return setLoading},VM:function(){return previousQuestion},Z$:function(){return nextQuestion},u$:function(){return setAnswer},ve:function(){return startQuiz}});var o=t(43395);let startQuiz=e=>({type:o.rC,payload:{quizData:e}}),setLoading=e=>({type:o.cS,payload:e}),nextQuestion=()=>({type:o.T_}),previousQuestion=()=>({type:o.NQ}),setAnswer=e=>({type:o.kV,payload:{answer:e}}),completeQuiz=e=>({type:o.XG,payload:e})},27479:function(e,n,t){t.d(n,{p:function(){return s},v:function(){return CourseCompletionProvider}});var o=t(97458),r=t(52983);let s=(0,r.createContext)(),CourseCompletionProvider=e=>{let{children:n,quizStatus:t,dispatch:r}=e;return(0,o.jsx)(s.Provider,{value:{quizStatus:t,dispatch:r},children:n})}},43395:function(e,n,t){t.d(n,{NQ:function(){return u},T_:function(){return s},XG:function(){return l},cS:function(){return r},kV:function(){return i},rC:function(){return o}});let o="START_QUIZ",r="SET_LOADING",s="NEXT_QUESTION",i="SET_ANSWER",u="PREVIOUS_QUESTION",l="COMPLETE_QUIZ"},33975:function(e,n,t){t.d(n,{_:function(){return i},g:function(){return s}});var o=t(5079),r=t(94110);function _templateObject(){let e=(0,o._)(["\n  mutation startCourseQuiz($courseSlug: String!) {\n    startCourseQuiz(courseSlug: $courseSlug) {\n      isError\n      isAlert\n      courseTitle\n      questions {\n        questionId\n        extraContentId\n        title\n        options\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,o._)(["\n  mutation endCourseQuiz($courseQuizAnswer: [CourseQuizAnswer]!, $courseSlug: String!) {\n    endCourseQuiz(courseQuizAnswer: $courseQuizAnswer, courseSlug: $courseSlug) {\n      completionTime\n      emptyCount\n      wrongCount\n      correctCount\n      score\n    }\n  }\n"]);return _templateObject1=function(){return e},e}let s=(0,r.Ps)(_templateObject()),i=(0,r.Ps)(_templateObject1())}}]);