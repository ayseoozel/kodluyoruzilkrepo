(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4002],{76701:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-notes",function(){return n(26939)}])},26939:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return E},default:function(){return G}});var o=n(97458),r=n(66430),i=n(23537),s=n(64435),d=n(66807),l=n(72751),u=n(54448),a=n(52983),c=n(53064),f=n(11644),m=n(6677),p=n(86848),b=n(77837),h=n.n(b),g=n(65898),_=n.n(g),j=n(87371),x=n(87805),v=n(16867),y=n(21611),N=n(78958),O=n(70374),C=n(57252),S=n(79008),I=n(71914),w=n(50777),$=n(76023),A=n(10020),P=n(28207),R=n(80536),MyNotes_NoteCard=e=>{let{note:t,onClick:n}=e,s=(0,r.p)(),d=(0,a.useRef)(),{t:u}=(0,m.$G)(["my-notes","common"]),{isOpen:c,onOpen:p,onClose:b}=(0,i.q)(),[h,{loading:g}]=(0,f.D)(x.Y,{update(e){let n=e.identify({_id:t._id,__typename:"Note"});e.evict({id:n}),e.gc()}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(y.P,{height:"full",sx:{aspectRatio:"1"},_hover:{cursor:"pointer",opacity:"0.7"},onClick:n,position:"relative",children:[(0,o.jsx)(N.h,{position:"absolute",top:2,right:0,variant:"link",icon:(0,o.jsx)(R.Z,{size:20}),zIndex:1,onClick:e=>{e.stopPropagation(),p()}}),(0,o.jsx)(O.Z,{height:"full",borderRadius:"md",justifyContent:"center",alignItems:"center",children:(0,o.jsx)(C.O,{isLoaded:null!=t,children:(0,o.jsx)(l.x,{fontSize:"md",fontWeight:"medium",textAlign:"center",children:t.title})})})]},t.courseId),(0,o.jsx)(S.a,{isCentered:!0,onClose:b,isOpen:c,motionPreset:"slideInBottom",leastDestructiveRef:d,children:(0,o.jsx)(I.Z,{children:(0,o.jsxs)(S._,{children:[(0,o.jsx)(w.x,{fontSize:"lg",fontWeight:"bold",children:u("deleteNote")}),(0,o.jsx)($.f,{children:u("deleteWarning")}),(0,o.jsxs)(A.m,{children:[(0,o.jsx)(P.z,{ref:d,onClick:b,isDisabled:g,children:u("common:cancel")}),(0,o.jsx)(P.z,{ml:3,bg:"red.500",isLoading:g,isDisabled:g,onClick:()=>{h({variables:{noteId:t._id}}).then(()=>{s({title:"Success",description:u("deleteNoteSuccess"),status:"success",duration:5e3,isClosable:!0}),b()})},children:u("common:delete")})]})]})})})]})},k=n(10180),MyNotes=()=>{let e=(0,p.cI)(),t=(0,r.p)(),[n,b]=(0,a.useState)({}),{t:g}=(0,m.$G)("my-notes"),{data:{notes:y}}=(0,c.a)(v.X),[N,O]=(0,a.useState)({}),{isOpen:C,onOpen:S,onClose:I}=(0,i.q)(),[w,{loading:$}]=(0,f.D)(x.n);(0,a.useEffect)(()=>{let e=y.map(e=>({value:e.courseId,label:e.title}));O(e)},[]),(0,a.useEffect)(()=>{e.reset({notes:{value:null==n?void 0:n.courseId,label:null==n?void 0:n.title}})},[e,n]);let A=(0,a.useCallback)(e=>{b(e),S()},[S]),P=e.watch("notes");(0,a.useEffect)(()=>{if((null==P?void 0:P.value)!==void 0){let e=y.find(e=>(null==e?void 0:e.courseId)===(null==P?void 0:P.value));A(e)}},[P,A]);let R=(0,a.useMemo)(()=>h()(async e=>{let{notes:n,noteBody:o}=e;await w({variables:{courseId:n.value,body:o.htmlString,bodyJSON:o.editorState},onError:()=>{}}),t({title:"Success",description:g("success"),status:"success",duration:2e3,isClosable:!0})},3e3),[w,g,t]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_(),{children:(0,o.jsx)("title",{children:g("my.notes")})}),(0,o.jsxs)(s.xu,{mt:-8,children:[(0,o.jsx)(j.Z,{}),(0,o.jsx)(d.X,{fontWeight:"semibold",fontSize:"xl",mb:"6",children:g("my.notes")}),0===y.length?(0,o.jsx)(l.x,{children:g("noNotes")}):(0,o.jsx)(u.r,{templateColumns:{base:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:"6",children:null==y?void 0:y.map(e=>(0,o.jsx)(MyNotes_NoteCard,{note:e,onClick:()=>{A(e)}},e._id))}),(0,o.jsx)(k.jC,{form:e,isOpen:C,onClose:I,loading:$,noteBody:null==n?void 0:n.body,noteBodyJSON:null==n?void 0:n.bodyJSON,notesOptions:N,handleSubmit:R})]})]})};MyNotes.isHideBreadcrumbs=!0;var E=!0,G=MyNotes},87371:function(e,t,n){"use strict";var o=n(97458),r=n(64435),i=n(62506),s=n(9262);n(52983);var d=n(95523),l=n(6677);t.Z=()=>{let e=(0,d.usePathname)(),{t}=(0,l.$G)("common");return(0,o.jsx)(r.xu,{maxW:"full",w:"full",overflowX:"auto",mb:8,children:(0,o.jsxs)(i.h,{variant:"ghost",spacing:".5",pb:"5px",children:[(0,o.jsx)(s.fK,{href:"/dashboard",isActive:"/dashboard"===e,children:t("dashboardNavbar.dashboard")}),(0,o.jsx)(s.fK,{href:"/profile",isActive:"/profile"===e,children:t("dashboardNavbar.profile")}),(0,o.jsx)(s.fK,{href:"/my-courses",isActive:"/my-courses"===e,children:t("dashboardNavbar.educations")}),(0,o.jsx)(s.fK,{href:"/my-notes",isActive:"/my-notes"===e,children:t("dashboardNavbar.notes")})]})})}},87805:function(e,t,n){"use strict";n.d(t,{Y:function(){return s},n:function(){return i}});var o=n(5079),r=n(94110);function _templateObject(){let e=(0,o._)(["\n  mutation addOrUpdateNote($courseId: String!, $body: String!, $bodyJSON: Object) {\n    note: addOrUpdateNote(courseId: $courseId, body: $body, bodyJSON: $bodyJSON) {\n      _id\n      body\n      bodyJSON\n      title\n      userId\n      courseId\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,o._)(["\n  mutation DeleteNote($noteId: String!) {\n    note: deleteNote(noteId: $noteId) {\n      _id\n    }\n  }\n"]);return _templateObject1=function(){return e},e}let i=(0,r.Ps)(_templateObject()),s=(0,r.Ps)(_templateObject1())},16867:function(e,t,n){"use strict";n.d(t,{X:function(){return s},l:function(){return i}});var o=n(5079),r=n(94110);function _templateObject(){let e=(0,o._)(["\n  query getCourseNote($courseId: String!) {\n    getCourseNote(courseId: $courseId) {\n      _id\n      body\n      courseId\n      title\n      userId\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,o._)(["\n  query getAllNotes {\n    notes: getAllNotes {\n      _id\n      body\n      bodyJSON\n      courseId\n      title\n      userId\n    }\n  }\n"]);return _templateObject1=function(){return e},e}let i=(0,r.Ps)(_templateObject()),s=(0,r.Ps)(_templateObject1())},65898:function(e,t,n){e.exports=n(23846)},54448:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var o=n(43028),r=n(22404),i=n(97458),s=(0,o.G)(function(e,t){let{templateAreas:n,gap:o,rowGap:s,columnGap:d,column:l,row:u,autoFlow:a,autoRows:c,templateRows:f,autoColumns:m,templateColumns:p,...b}=e;return(0,i.jsx)(r.m.div,{ref:t,__css:{display:"grid",gridTemplateAreas:n,gridGap:o,gridRowGap:s,gridColumnGap:d,gridAutoColumns:m,gridColumn:l,gridRow:u,gridAutoFlow:a,gridAutoRows:c,gridTemplateRows:f,gridTemplateColumns:p},...b})});s.displayName="Grid"},21611:function(e,t,n){"use strict";n.d(t,{P:function(){return l}});var o=n(43028),r=n(22404),i=n(62282),s=n(9878),d=n(97458);function spanFn(e){return(0,s.XQ)(e,e=>"auto"===e?"auto":`span ${e}/span ${e}`)}var l=(0,o.G)(function(e,t){let{area:n,colSpan:o,colStart:s,colEnd:l,rowEnd:u,rowSpan:a,rowStart:c,...f}=e,m=(0,i.o)({gridArea:n,gridColumn:spanFn(o),gridRow:spanFn(a),gridColumnStart:s,gridColumnEnd:l,gridRowStart:c,gridRowEnd:u});return(0,d.jsx)(r.m.div,{ref:t,__css:m,...f})});l.displayName="GridItem"},79008:function(e,t,n){"use strict";n.d(t,{_:function(){return d},a:function(){return AlertDialog}});var o=n(44610),r=n(71811),i=n(43028),s=n(97458);function AlertDialog(e){let{leastDestructiveRef:t,...n}=e;return(0,s.jsx)(r.u_,{...n,initialFocusRef:t})}var d=(0,i.G)((e,t)=>(0,s.jsx)(o.h,{ref:t,role:"alertdialog",...e}))}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=76701)}),_N_E=e.O()}]);