"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7822],{83606:function(e,r,i){i.d(r,{j:function(){return saveAccessToken}});var n=i(43775),s=i(72968);let saveAccessToken=async()=>{let e=await (0,n.getSession)(),r=localStorage.getItem(s.fA);(null==e?void 0:e.accessToken)&&(!r||e.accessToken!==r)&&localStorage.setItem(s.fA,e.accessToken)}},47822:function(e,r,i){i.d(r,{Z:function(){return components_SignUpModal}});var n=i(97458),s=i(71811),a=i(71914),t=i(44610),o=i(62406),l=i(76023),d=i(33490),c=i(53692),m=i(76940),u=i(68757),h=i(7492),x=i(6677),g=i(52983),p=i(66430),j=i(44578),f=i(48419),v=i(64435),y=i(80430),S=i(22404),b=i(68895),k=i(7881),I=i(76220),w=i(1303),A=i(27217),C=i(28207),N=i(30984),z=i(51979),F=i(42185),U=i(95523),_=i(31838),M=i(43775),L=i(86848),E=i(37627),q=i.n(E),D=i(81207),T=i(82891),K=i(83606),W=i(46442),R=i(15433),SignUpModal_SignIn=e=>{var r,i;let{providers:s,callback:a}=e,[t,o]=(0,g.useState)(!1),l=(0,p.p)(),d=(0,U.useRouter)(),{update:c}=(0,M.useSession)(),m=(0,g.useRef)(null),u=(0,U.useSearchParams)(),[h,E]=(0,g.useState)(!1),[P,Z]=(0,g.useState)(),[O,$]=(0,g.useState)(!1),{colorMode:G}=(0,j.If)(),{t:B,i18n:J}=(0,x.$G)("auth"),{handleSubmit:V,register:X,formState:Y,control:H,setValue:Q}=(0,L.cI)(),signInWithCredentials=async e=>{let{email:r,password:i,turnstileISecretKey:n}=e;try{let e=await (0,M.signIn)("credentials",{email:r,password:i,redirect:!1,turnstileISecretKey:n});if(null==e?void 0:e.error)throw Error(e.error);l({title:B("signInForm.welcome"),description:(0,W.Z)(),status:"success",duration:4e3,isClosable:!0}),await (0,K.j)(),await c({isMeteorTokenReady:!0}),a?a():d.refresh()}catch(e){var s;l({title:"Login failed",description:B(e.message,"Unexpected error occurred: ".concat(e.message)),status:"error",duration:5e3,isClosable:!0}),null===(s=m.current)||void 0===s||s.reset()}},signInWithEmail=async e=>{let{email:r,turnstileISecretKey:i}=e;try{Z(r),await (0,M.signIn)("email",{email:r.toLocaleLowerCase("en-US"),redirect:!1},{turnstileISecretKey:i}),$(!0)}catch(e){$(!0)}},ee="OAuthAccountNotLinked"===u.get("error"),er="Verification"===u.get("error"),ei=(0,j.ff)("gray.800","gray.500");return(0,n.jsx)(f.M,{flex:"1",children:(0,n.jsxs)(v.xu,{py:{base:"12",md:"4"},width:"full",maxW:"md",children:[(0,n.jsx)(D.c,{isLogin:!0,providers:s,showEmailLogin:t,isDisabled:Y.isSubmitting,setShowEmailLogin:o,clearLoginWithEmailState:()=>{$(!1),Z("")}}),"email"===t&&(0,n.jsxs)(y.K,{spacing:"6",as:S.m.form,onSubmit:V(signInWithCredentials),children:[(0,n.jsxs)(y.K,{spacing:"8",children:[(0,n.jsxs)(b.NI,{isRequired:!0,isInvalid:null===(r=Y.errors)||void 0===r?void 0:r.email,children:[(0,n.jsx)(k.I,{"data-peer":!0,id:"email",type:"email",placeholder:" ",...X("email",{required:!0})}),(0,n.jsx)(I.l,{htmlFor:"email",variant:"floating",size:"md",color:ei,children:B("signInForm.email")})]}),(0,n.jsx)(T.Z,{isFloating:!0,name:"password",control:H,label:B("password"),rules:{required:!0},labelColor:ei})]}),(0,n.jsxs)(w.U,{justify:"space-between",children:[(0,n.jsx)(A.X,{defaultChecked:!0,children:B("signInForm.rememberMe")}),(0,n.jsx)(C.z,{variant:"link",color:"primary.color",size:"sm",children:(0,n.jsxs)(q(),{href:"/reset-password",children:[" ",B("signInForm.forgotPassword")]})})]}),(0,n.jsx)(f.M,{children:(0,n.jsx)(_.Nc,{ref:m,onExpire:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.reset()},options:{theme:G,language:J.language,refreshExpired:"manual"},siteKey:"0x4AAAAAAADjBeccgONhSi7k",onSuccess:e=>{Q("turnstileISecretKey",e),E(!0)},onError:()=>{E(!0)},className:"turnstile"})}),(0,n.jsx)(N.k,{justifyContent:"center",children:(0,n.jsx)(C.z,{fontSize:"sm",h:"40px",fontWeight:"semibold",type:"submit",variant:"outline",isDisabled:Y.isSubmitting||!h,isLoading:Y.isSubmitting||!h,"data-testid":"sign-in-button",children:B("signIn")})})]}),"email-link"===t&&(0,n.jsx)(n.Fragment,{children:O?(0,n.jsx)(R.Z,{email:P}):(0,n.jsxs)(y.K,{spacing:"6",as:S.m.form,onSubmit:V(signInWithEmail),children:[(0,n.jsx)(y.K,{spacing:"8",children:(0,n.jsxs)(b.NI,{isRequired:!0,isInvalid:null===(i=Y.errors)||void 0===i?void 0:i.email,children:[(0,n.jsx)(k.I,{"data-peer":!0,id:"email",type:"email",placeholder:" ",...X("email",{required:!0})}),(0,n.jsx)(I.l,{htmlFor:"email",variant:"floating",size:"md",children:B("signInForm.email")})]})}),(0,n.jsx)(f.M,{children:(0,n.jsx)(_.Nc,{ref:m,onExpire:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.reset()},options:{theme:G,language:J.language,refreshExpired:"manual"},siteKey:"0x4AAAAAAADjBeccgONhSi7k",onSuccess:e=>{Q("turnstileISecretKey",e),E(!0)},onError:()=>{E(!0)},className:"turnstile"})}),(0,n.jsx)(N.k,{justifyContent:"center",children:(0,n.jsx)(C.z,{fontSize:"sm",h:"40px",fontWeight:"semibold",type:"submit",variant:"outline",isDisabled:Y.isSubmitting||!h,isLoading:Y.isSubmitting||!h,"data-testid":"sign-in-button",children:B("signInForm.sendEmailLink")})})]})}),er&&(0,n.jsxs)(z.b,{mt:4,status:"warning",children:[(0,n.jsx)(F.z,{}),B("verificationError")]}),ee&&(0,n.jsxs)(z.b,{mt:4,status:"warning",children:[(0,n.jsx)(F.z,{}),B("alreadyLinked")]})]})})},P=i(60626),Z=i(67045),O=i(11644),$=i(27195),G=i(21826),B=i(42423),SignUpModal_SignUp=e=>{var r,i,s,a,t,o,l;let{providers:d={}}=e,[c,m]=(0,g.useState)(!1),u=(0,p.p)(),h=(0,U.useRouter)(),{update:I}=(0,M.useSession)(),w=(0,g.useRef)(null),{colorMode:E}=(0,j.If)(),q=(0,U.useSearchParams)(),[W]=(0,O.D)(G.KN),{t:R,i18n:J}=(0,x.$G)(["auth","common"]),[V,X]=(0,P.k)(),[Y,H]=(0,g.useState)(!1),{handleSubmit:Q,register:ee,formState:er,control:ei,setValue:en}=(0,L.cI)(),onSubmit=async e=>{let{email:r,password:i,firstName:n,lastName:s,isOlderThan18:a,turnstileISecretKey:t}=e;await W({variables:{email:r,password:i,firstName:n,lastName:s,...a&&{isOlderThan18:"yes"===a}},onCompleted:()=>{u({title:R("signUpForm.accountCreated"),description:R("signUpForm.weCreatedAccount"),status:"success",duration:1250,isClosable:!0}),(0,M.signIn)("email",{email:r,redirect:!1},{skipCaptcha:!0}).then(),setTimeout(async()=>{await (0,M.signIn)("credentials",{email:r,password:i,redirect:!1,turnstileISecretKey:t}),await (0,K.j)(),await I({isMeteorTokenReady:!0}),h.push("/verify-email")},1250)},onError:()=>{var e;null===(e=w.current)||void 0===e||e.reset()}})},es=(0,L.qo)({control:ei,name:"password"}),ea="OAuthAccountNotLinked"===q.get("error"),et=(0,j.ff)("gray.800","gray.500"),eo=(0,g.useCallback)(e=>(null==e?void 0:e.length)<2?R("signUpForm.minCharactersName"):(null==e?void 0:e.length)>37?R("signUpForm.maxCharactersName"):!!/^[a-zA-ZçÇğĞıİöÖşŞüÜ\s]*$/.test(e)||R("signUpForm.nameContainLetters"),[]),el=(0,g.useCallback)(e=>(null==e?void 0:e.length)<2?R("signUpForm.minCharactersSurname"):(null==e?void 0:e.length)>37?R("signUpForm.maxCharactersSurname"):!!/^[a-zA-ZçÇğĞıİöÖşŞüÜ\s]*$/.test(e)||R("signUpForm.surnameContainLetters"),[]);return(0,n.jsx)(f.M,{flex:"1",children:(0,n.jsxs)(v.xu,{py:{base:"12",md:"4"},width:"full",maxW:"md",children:[(0,n.jsx)(D.c,{showEmailLogin:c,setShowEmailLogin:m,providers:d,sDisabled:er.isSubmitting}),c&&(0,n.jsxs)(v.xu,{as:S.m.form,onSubmit:Q(onSubmit),children:[(0,n.jsxs)(y.K,{spacing:"6",children:[(0,n.jsxs)(b.NI,{isRequired:!0,isInvalid:null===(r=er.errors)||void 0===r?void 0:r.firstName,children:[(0,n.jsx)(k.I,{_placeholder:{color:et},"data-peer":!0,id:"firstName",type:"firstName",placeholder:R("signUpForm.firstName"),autoComplete:"firstName",...ee("firstName",{required:!0,validate:eo})}),(0,n.jsx)(Z.J1,{children:null===(s=er.errors)||void 0===s?void 0:null===(i=s.firstName)||void 0===i?void 0:i.message})]}),(0,n.jsxs)(b.NI,{isRequired:!0,isInvalid:null===(a=er.errors)||void 0===a?void 0:a.lastName,children:[(0,n.jsx)(k.I,{_placeholder:{color:et},"data-peer":!0,id:"lastName",type:"lastName",placeholder:R("signUpForm.lastName"),autoComplete:"lastName",...ee("lastName",{required:!0,validate:el})}),(0,n.jsx)(Z.J1,{children:null===(o=er.errors)||void 0===o?void 0:null===(t=o.lastName)||void 0===t?void 0:t.message})]}),(0,n.jsx)(b.NI,{isRequired:!0,isInvalid:null===(l=er.errors)||void 0===l?void 0:l.email,children:(0,n.jsx)(k.I,{_placeholder:{color:et},"data-peer":!0,id:"email",type:"email",placeholder:R("signUpForm.email"),autoComplete:"email",...ee("email",{required:!0})})}),(0,n.jsx)(T.Z,{_placeholder:{color:et},hideLabel:!0,control:ei,name:"password",placeholder:R("password"),rules:{minLength:8,required:!0}}),(0,n.jsx)(T.Z,{_placeholder:{color:et},hideLabel:!0,control:ei,name:"confirmPassword",placeholder:R("signUpForm.confirmPassword"),helper:R("signUpForm.passwordHelper"),rules:{minLength:8,required:!0,validate:e=>e===es||R("signUpForm.passwordsDoNotMatch")}}),(0,n.jsx)(f.M,{children:(0,n.jsx)(_.Nc,{ref:w,onExpire:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.reset()},options:{theme:E,language:J.language,refreshExpired:"manual"},siteKey:"0x4AAAAAAADjBeccgONhSi7k",onSuccess:e=>{en("turnstileISecretKey",e),H(!0)},onError:()=>{H(!0)},className:"turnstile"})})]}),(0,n.jsxs)(v.xu,{mt:4,children:[V&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{labelProps:{fontSize:"xs",fontWeight:"medium"},optionProps:{fontSize:"xs"},isRequired:!0,control:ei,name:"isOlderThan18",rules:{required:!0},options:[{value:"yes",label:R("common:yes")},{value:"no",label:R("common:no")}],label:R("signUpForm.isOlderThan18")}),(0,n.jsxs)(N.k,{alignItems:"flex-start",children:[(0,n.jsx)(A.X,{required:!0,...ee("dataConsent",{required:!0}),mr:1}),(0,n.jsx)(B.M,{})]})]}),(0,n.jsxs)(N.k,{my:6,alignItems:"flex-start",children:[(0,n.jsx)(A.X,{required:!0,...ee("kvkkTerms",{required:!0}),mr:1}),(0,n.jsx)(B.F,{isFromTurkey:V})]})]}),(0,n.jsx)(C.z,{fontSize:"sm",fontWeight:"semibold",w:"full",size:"lg",type:"submit",variant:"outline","data-testid":"sign-up-button",isLoading:er.isSubmitting||!Y,isDisabled:er.isSubmitting||!Y,children:R("signUp")})]}),ea&&(0,n.jsxs)(z.b,{mt:4,status:"warning",children:[(0,n.jsx)(F.z,{}),R("alreadyLinked")]}),c&&(0,n.jsx)(f.M,{mt:2,children:(0,n.jsx)(C.z,{fontSize:"xs",fontWeight:"normal",color:"primary.color",size:"sm",onClick:X.toggle,textAlign:"center",cursor:"pointer",variant:"link",children:V?R("signUpForm.notFromTurkey"):R("signUpForm.fromTurkey")})})]})})},J=i(72968),V=i(83658),components_SignUpModal=e=>{let{isOpen:r,onClose:i,callback:p}=e,{t:j}=(0,x.$G)("auth"),{data:f,update:v}=(0,M.useSession)(),y=(0,V.useRouter)(),{query:S,pathname:b,asPath:k}=y,I=(0,g.useCallback)(async e=>{var r,i,n,s;let a=localStorage.getItem(J.fA);a&&e.accessToken===a||(localStorage.setItem(J.fA,e.accessToken),await v({isMeteorTokenReady:!0})),(null==e?void 0:null===(i=e.user)||void 0===i?void 0:null===(r=i.profile)||void 0===r?void 0:r.lang)?y.push({pathname:b,query:S},k,{locale:null==e?void 0:null===(s=e.user)||void 0===s?void 0:null===(n=s.profile)||void 0===n?void 0:n.lang}):y.push(b)},[v]);return(0,g.useEffect)(()=>{f&&I(f)},[f,I]),(0,n.jsxs)(s.u_,{isOpen:r,onClose:i,children:[(0,n.jsx)(a.Z,{}),(0,n.jsxs)(t.h,{children:[(0,n.jsx)(o.o,{}),(0,n.jsx)(l.f,{children:(0,n.jsxs)(d.m,{variant:"unstyled",isLazy:!0,children:[(0,n.jsxs)(c.t,{children:[(0,n.jsx)(m.O,{_selected:{color:"primary.color",borderBottom:"2px solid",borderColor:"primary.color"},children:j("signIn")}),(0,n.jsx)(m.O,{_selected:{color:"primary.color",borderBottom:"2px solid",borderColor:"primary.color"},children:j("signUp")})]}),(0,n.jsxs)(u.n,{children:[(0,n.jsx)(h.x,{children:(0,n.jsx)(SignUpModal_SignIn,{callback:p})}),(0,n.jsx)(h.x,{children:(0,n.jsx)(SignUpModal_SignUp,{})})]})]})})]})]})}},15433:function(e,r,i){var n=i(97458),s=i(52540),a=i(80430),t=i(72751),o=i(24955),l=i(6677);r.Z=e=>{let{email:r}=e,{t:i}=(0,l.$G)("auth");return(0,n.jsxs)(a.K,{align:"center",rounded:"lg",shadow:"2xl",px:3,py:4,children:[(0,n.jsx)(s.r,{color:"green.500",boxSize:7}),(0,n.jsx)(t.x,{fontSize:"md",children:i("checkYourMail")}),(0,n.jsx)(t.x,{fontSize:"md",textAlign:"center",children:(0,n.jsx)(o.y$,{query:null!=r?r:"",styles:{px:"1",py:"1",bg:"orange.50",rounded:"md",fontSize:"14"},children:i("loginLinkSended",{email:null!=r?r:""})})})]})}},42423:function(e,r,i){i.d(r,{F:function(){return Terms},M:function(){return DataConsent}});var n=i(97458),s=i(72751),a=i(22404),t=i(6677),o=i(37627),l=i.n(o);i(52983);let Terms=e=>{let{isFromTurkey:r}=e,{i18n:i}=(0,t.$G)("auth");return r?"en"===i.language?(0,n.jsxs)(s.x,{fontSize:"xs",children:["I consent to the transfer of my personal data abroad for Google Drive / Microsoft storage services with my express consent in accordance with Article 9/1 of the KVKK, limited to the purposes specified in the scope of"," ",(0,n.jsx)(l(),{href:"/privacy",target:"_blank",children:(0,n.jsx)(a.m.span,{color:"primary.color",fontWeight:"normal",_hover:{textDecoration:"underline"},children:"Informative Text on the Protection and Processing of Personal Data."})})]}):(0,n.jsxs)(s.x,{fontSize:"xs",children:["Işbu"," ",(0,n.jsx)(l(),{href:"/privacy",target:"_blank",children:(0,n.jsxs)(a.m.span,{color:"primary.color",fontWeight:"normal",_hover:{textDecoration:"underline"},children:["Aydınlatma Metni"," "]})}),"kapsamında belirtilen ama\xe7lar ile sinirli olarak kişisel verilerimin KVKK Md.9/1 uyarınca acık rızam dahilinde Google Drive/Microsoft saklama hizmetleri i\xe7in yurt dışına aktarılmasını onaylıyorum."]}):"en"===i.language?(0,n.jsxs)(s.x,{fontSize:"xs",children:["I agree to the terms and"," ",(0,n.jsx)(l(),{href:"/privacy-policy",target:"_blank",children:(0,n.jsx)(a.m.span,{color:"primary.color",fontWeight:"normal",_hover:{textDecoration:"underline"},children:"conditions."})})]}):(0,n.jsxs)(s.x,{fontSize:"xs",children:["Işbu"," ",(0,n.jsxs)(l(),{href:"/privacy-policy",target:"_blank",children:[(0,n.jsx)(a.m.span,{color:"primary.color",fontWeight:"normal",_hover:{textDecoration:"underline"},children:"Aydinlatma Metni"}),"‘ni okudum onaylıyorum."]})]})},DataConsent=()=>{let{i18n:e}=(0,t.$G)("auth");return"en"===e.language?(0,n.jsxs)(s.x,{fontSize:"xs",children:["I have read and approved this"," ",(0,n.jsx)(l(),{href:"https://cohorts.patika.dev/terms",target:"_blank",children:(0,n.jsx)(a.m.span,{color:"primary.color",_hover:{textDecoration:"underline"},children:"Informative Text on the Protection and Processing of Personal Data."})})]}):(0,n.jsxs)(s.x,{fontSize:"sm",children:["Işbu"," ",(0,n.jsxs)(l(),{href:"https://cohorts.patika.dev/terms",target:"_blank",children:[(0,n.jsx)(a.m.span,{color:"primary.color",fontWeight:"medium",_hover:{textDecoration:"underline"},children:"Aydinlatma Metni"}),"‘ni okudum onaylıyorum."]})]})}},27195:function(e,r,i){var n=i(97458);i(52983);var s=i(94959),a=i(68895),t=i(76220),o=i(86639),l=i(80430),d=i(77839),c=i(72751),m=i(67045),u=i(86848);r.Z=e=>{var r;let{name:i,label:h,rules:x,options:g,control:p,isRequired:j,direction:f="row",labelProps:v,optionProps:y,...S}=e,{field:b,formState:{errors:k}}=(0,u.bc)({control:p,name:i,rules:x}),{getRootProps:I,getRadioProps:w}=(0,s.a)({name:i,onChange:b.onChange,value:b.value});return(0,n.jsxs)(a.NI,{isRequired:j,isInvalid:k[i],mb:6,children:[(0,n.jsx)(t.l,{...v,children:h}),(0,n.jsx)(o.E,{...I(),children:(0,n.jsx)(l.K,{direction:f,children:g.map(e=>{let{value:r,label:i}=e;return(0,n.jsx)(d.Y,{...w({value:r}),...S,children:(0,n.jsx)(c.x,{...y,children:i})},r)})})}),(0,n.jsx)(m.J1,{children:null==k?void 0:null===(r=k[i])||void 0===r?void 0:r.message})]})}}}]);